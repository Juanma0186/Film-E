<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Buscador de TMDb</title>
    <style>
        #resultados {
            display: flex;
            flex-wrap: wrap;
        }

        .resultado {
            margin: 10px;
            padding: 10px;
            border: 1px solid #ddd;
        }
    </style>
</head>

<body>
    <form id="formulario">
        <input type="text" id="titulo" placeholder="Título">
        <select id="tipo">
            <option value="">Todos</option>
            <option value="movie">Películas</option>
            <option value="tv">Series de televisión</option>
        </select>
        <button type="submit">Buscar</button>
    </form>
    <button onclick="ordenarResultados('asc')">Ordenar por fecha de lanzamiento ascendente</button>
    <button onclick="ordenarResultados('desc')">Ordenar por fecha de lanzamiento descendente</button>
    <div id="resultados"></div>

    <script>
        let resultados = [];

        document.getElementById('formulario').addEventListener('submit', function (event) {
            event.preventDefault();
            const titulo = document.getElementById('titulo').value;
            const tipo = document.getElementById('tipo').value;
            buscar(titulo, tipo);
        });

        async function buscar(titulo, tipo) {
            const response = await fetch(`https://api.themoviedb.org/3/search/multi?api_key=a35eb9b2a0da4da2cd02766b7d42ed24&query=${titulo}`);
            const data = await response.json();
            resultados = data.results.filter(resultado => tipo ? resultado.media_type === tipo : true);
            mostrarResultados(resultados);
        }

        function mostrarResultados(resultados) {
            const contenedor = document.getElementById('resultados');
            contenedor.innerHTML = '';
            for (let resultado of resultados) {
                const div = document.createElement('div');
                div.className = 'resultado text-center';
                div.innerHTML = `
                    <h2>${resultado.title || resultado.name}</h2>
                    <img src="https://image.tmdb.org/t/p/w500${resultado.poster_path}" alt="${resultado.title || resultado.name}" class="w-25 h-25 ">
                    <p>Tipo: ${resultado.media_type === 'movie' ? 'Película' : 'Serie de televisión'}</p>
                    <p>Fecha de lanzamiento: ${resultado.release_date || resultado.first_air_date}</p>
                `;
                contenedor.appendChild(div);
            }
        }

        function ordenarResultados(orden) {
            resultados.sort((a, b) => {
                const fechaA = new Date(a.release_date || a.first_air_date);
                const fechaB = new Date(b.release_date || b.first_air_date);
                return orden === 'asc' ? fechaA - fechaB : fechaB - fechaA;
            });
            mostrarResultados(resultados);
        }
    </script>
</body>

</html>